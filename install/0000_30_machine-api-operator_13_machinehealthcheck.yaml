---
apiVersion: machine.uccp.io/v1beta1
kind: MachineHealthCheck
metadata:
  name: machine-api-termination-handler
  namespace: uccp-machine-api
  labels:
    api: clusterapi
    k8s-app: termination-handler
  annotations:
    include.release.uccp.io/self-managed-high-availability: "true"
    exclude.release.uccp.io/internal-uccp-hosted: "true"
spec:
  selector:
    matchLabels:
      machine.uccp.io/interruptible-instance: ""
  maxUnhealthy: 100%
  # This MHC should only ever remove nodes that have the terminating condition.
  # Disable node startup timeout check.
  nodeStartupTimeout: "0"
  unhealthyConditions:
  - type: Terminating
    status: "True"
    timeout: 0s
